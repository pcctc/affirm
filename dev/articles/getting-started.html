<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="affirm">
<title>Getting Started • affirm</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started">
<meta property="og:description" content="affirm">
<meta property="og:image" content="https://pcctc.github.io/affirm/logo.png">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">affirm</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.2.0.9001</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/getting-started.html">Getting Started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/pcctc/affirm">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Getting Started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/pcctc/affirm/blob/HEAD/vignettes/getting-started.Rmd" class="external-link"><code>vignettes/getting-started.Rmd</code></a></small>
      <div class="d-none name"><code>getting-started.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/pages/pcctc/affirm/" class="external-link">affirm</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<p>The affirm package was build to run data checks, or affirmations,
against data that continually updates. In this brief tutorial, we’ll
walk through the basics of using the package for identifying and
reporting errors in the data.</p>
<div class="section level2">
<h2 id="validate-edc-data">Validate EDC Data<a class="anchor" aria-label="anchor" href="#validate-edc-data"></a>
</h2>
<p>Validating electronic data capture system data has some nuance
different from other types of validation, and the examples below
illustrate issues that often arise during EDC validation.</p>
<div class="section level3">
<h3 id="initiate">Initiate<a class="anchor" aria-label="anchor" href="#initiate"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/affirm_init.html">affirm_init</a></span><span class="op">(</span>replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> We're ready to make data affirmations...</span></span>
<span></span>
<span><span class="co"># this option is used to auto-select columns that appear in the report listings </span></span>
<span><span class="co"># (default are these IDs and the columns that appear in the condition being tested)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span><span class="st">'affirm.id_cols'</span> <span class="op">=</span> <span class="st">"SUBJECT"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="affirm">Affirm<a class="anchor" aria-label="anchor" href="#affirm"></a>
</h3>
<p>Affirm that there are no missing subject IDs</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/affirm_true.html">affirm_true</a></span><span class="op">(</span></span>
<span>  <span class="va">RAND</span>,</span>
<span>  label <span class="op">=</span> <span class="st">"RAND: Subject ID is not missing"</span>,</span>
<span>  condition <span class="op">=</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">SUBJECT</span><span class="op">)</span>,</span>
<span>  id <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  priority <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  data_frames <span class="op">=</span> <span class="st">"RAND"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> RAND: Subject ID is not missing</span></span>
<span><span class="co">#&gt;   <span style="color: #0000BB;">0</span> issues identified.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 3</span></span></span>
<span><span class="co">#&gt;   SUBJECT RAND_GROUP RAND_STRATA</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>       1 Drug A     &lt;65yr      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>       2 Drug B     &gt;=65yr     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>       3 Drug A     &lt;65yr      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>       4 Drug B     &gt;=65yr     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>       5 <span style="color: #BB0000;">NA</span>         &gt;=65yr</span></span></code></pre></div>
<p>This time we’ll affirm that the randomization assignment is not
missing and if it is missing we take the further action of removing
those rows from the returned data frame.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">RAND</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/affirm_true.html">affirm_true</a></span><span class="op">(</span></span>
<span>    <span class="va">RAND</span>,</span>
<span>    label <span class="op">=</span> <span class="st">"RAND: Randomization Group is not missing"</span>,</span>
<span>    condition <span class="op">=</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">RAND_GROUP</span><span class="op">)</span>,</span>
<span>    data_action <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">.</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">RAND_GROUP</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    id <span class="op">=</span> <span class="fl">2L</span>,</span>
<span>    priority <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    data_frames <span class="op">=</span> <span class="st">"RAND"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> RAND: Randomization Group is not missing</span></span>
<span><span class="co">#&gt;   <span style="color: #0000BB;">1</span> issue identified.</span></span></code></pre></div>
<p>In this affirmation, we merge in data from the DM data set, and check
whether the reported subject age aligns with the age group in the
randomization stratification variable.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">RAND</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span></span>
<span>    <span class="va">DM</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/prepend_df_name.html">prepend_df_name</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">SUBJECT</span>, <span class="va">DM.AGE</span><span class="op">)</span> , </span>
<span>    by <span class="op">=</span> <span class="st">"SUBJECT"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/affirm_true.html">affirm_true</a></span><span class="op">(</span></span>
<span>    label <span class="op">=</span> <span class="st">"RAND: Randomization strata match recorded subject age"</span>,</span>
<span>    condition <span class="op">=</span></span>
<span>      <span class="op">(</span><span class="va">RAND_STRATA</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="st">"&lt;65yr"</span> <span class="op">&amp;</span> <span class="va">DM.AGE</span> <span class="op">&lt;</span> <span class="fl">65</span><span class="op">)</span> <span class="op">|</span> <span class="op">(</span><span class="va">RAND_STRATA</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="st">"&gt;=65yr"</span> <span class="op">&amp;</span> <span class="va">DM.AGE</span> <span class="op">&gt;=</span> <span class="fl">65</span><span class="op">)</span>,</span>
<span>    id <span class="op">=</span> <span class="fl">3L</span>,</span>
<span>    priority <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    data_frames <span class="op">=</span> <span class="st">"RAND, DM"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> RAND: Randomization strata match recorded subject age</span></span>
<span><span class="co">#&gt;   <span style="color: #0000BB;">1</span> issue identified.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 4</span></span></span>
<span><span class="co">#&gt;   SUBJECT RAND_GROUP RAND_STRATA DM.AGE</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>       1 Drug A     &lt;65yr           40</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>       2 Drug B     &gt;=65yr          70</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>       3 Drug A     &lt;65yr           50</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>       4 Drug B     &gt;=65yr          60</span></span></code></pre></div>
<p>In this example, we will modify the data frame that will be reported
to a data management team. We will return all rows from the data frame,
and include a flag for row with bad inputs.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/affirm_true.html">affirm_true</a></span><span class="op">(</span></span>
<span>  <span class="va">DM</span>,</span>
<span>  label <span class="op">=</span> <span class="st">"DM: Subject race is one of 'Asian', 'Black or African American', 'Native Hawaiian or Other Pacific Islander', 'American Indian or Alaska Native', 'White'"</span>,</span>
<span>  condition <span class="op">=</span> <span class="va">RACE</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Asian'</span>, <span class="st">'Black or African American'</span>, <span class="st">'Native Hawaiian or Other Pacific Islander'</span>, <span class="st">'American Indian or Alaska Native'</span>, <span class="st">'White'</span><span class="op">)</span>,</span>
<span>  report_listing <span class="op">=</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">SUBJECT</span>, <span class="va">RACE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>..flag.. <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="op">!</span><span class="va">lgl_condition</span>, <span class="va">label</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  id <span class="op">=</span> <span class="fl">4L</span>,</span>
<span>  data_frames <span class="op">=</span> <span class="st">"DM"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">•</span> DM: Subject race is one of 'Asian', 'Black or African American', 'Native</span></span>
<span><span class="co">#&gt;   Hawaiian or Other Pacific Islander', 'American Indian or Alaska Native',</span></span>
<span><span class="co">#&gt;   'White'</span></span>
<span><span class="co">#&gt;   <span style="color: #0000BB;">1</span> issue identified.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 3</span></span></span>
<span><span class="co">#&gt;   SUBJECT   AGE RACE                                     </span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>       1    40 Asian                                    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>       2    70 Black or African American                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>       3    50 Native American                          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>       4    60 Native Hawaiian or Other Pacific Islander</span></span>
<span></span>
<span><span class="co"># we'll take a peak at the 'report_listing' data frame now</span></span>
<span><span class="fu"><a href="../reference/affirm_report.html">affirm_report_raw_data</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">id</span> <span class="op">==</span> <span class="fl">4L</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 3</span></span></span>
<span><span class="co">#&gt;   SUBJECT RACE                                      ..flag..                    </span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>       1 Asian                                     <span style="color: #BB0000;">NA</span>                          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>       2 Black or African American                 <span style="color: #BB0000;">NA</span>                          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>       3 Native American                           DM: Subject race is one of …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>       4 Native Hawaiian or Other Pacific Islander <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="report">Report<a class="anchor" aria-label="anchor" href="#report"></a>
</h3>
<p>Get a summary of the collection of data affirmations in a gt table
with <code><a href="../reference/affirm_report.html">affirm_report_gt()</a></code>. The table includes</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/affirm_report.html">affirm_report_gt</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div id="wkeqavgxva" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#wkeqavgxva table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#wkeqavgxva thead, #wkeqavgxva tbody, #wkeqavgxva tfoot, #wkeqavgxva tr, #wkeqavgxva td, #wkeqavgxva th {
  border-style: none;
}

#wkeqavgxva p {
  margin: 0;
  padding: 0;
}

#wkeqavgxva .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 15px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#wkeqavgxva .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#wkeqavgxva .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#wkeqavgxva .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#wkeqavgxva .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wkeqavgxva .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wkeqavgxva .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wkeqavgxva .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#wkeqavgxva .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#wkeqavgxva .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#wkeqavgxva .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#wkeqavgxva .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#wkeqavgxva .gt_spanner_row {
  border-bottom-style: hidden;
}

#wkeqavgxva .gt_group_heading {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#wkeqavgxva .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#wkeqavgxva .gt_from_md > :first-child {
  margin-top: 0;
}

#wkeqavgxva .gt_from_md > :last-child {
  margin-bottom: 0;
}

#wkeqavgxva .gt_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#wkeqavgxva .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#wkeqavgxva .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#wkeqavgxva .gt_row_group_first td {
  border-top-width: 2px;
}

#wkeqavgxva .gt_row_group_first th {
  border-top-width: 2px;
}

#wkeqavgxva .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#wkeqavgxva .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#wkeqavgxva .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#wkeqavgxva .gt_last_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wkeqavgxva .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#wkeqavgxva .gt_first_grand_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#wkeqavgxva .gt_last_grand_summary_row_top {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#wkeqavgxva .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#wkeqavgxva .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wkeqavgxva .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wkeqavgxva .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#wkeqavgxva .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wkeqavgxva .gt_sourcenote {
  font-size: 90%;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#wkeqavgxva .gt_left {
  text-align: left;
}

#wkeqavgxva .gt_center {
  text-align: center;
}

#wkeqavgxva .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#wkeqavgxva .gt_font_normal {
  font-weight: normal;
}

#wkeqavgxva .gt_font_bold {
  font-weight: bold;
}

#wkeqavgxva .gt_font_italic {
  font-style: italic;
}

#wkeqavgxva .gt_super {
  font-size: 65%;
}

#wkeqavgxva .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#wkeqavgxva .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#wkeqavgxva .gt_indent_1 {
  text-indent: 5px;
}

#wkeqavgxva .gt_indent_2 {
  text-indent: 10px;
}

#wkeqavgxva .gt_indent_3 {
  text-indent: 15px;
}

#wkeqavgxva .gt_indent_4 {
  text-indent: 20px;
}

#wkeqavgxva .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="table gt_table" style="table-layout: fixed;" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<colgroup>
<col style="width:6px;">
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<thead><tr class="gt_col_headings">
<th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id=""></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;ID&lt;/strong&gt;"><strong>ID</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;Affirmation&lt;/strong&gt;"><strong>Affirmation</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;Priority&lt;/strong&gt;"><strong>Priority</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;Data Frames&lt;/strong&gt;"><strong>Data Frames</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;Columns&lt;/strong&gt;"><strong>Columns</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;No. Errors&lt;/strong&gt;"><strong>No. Errors</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;Total No. Checks&lt;/strong&gt;"><strong>Total No. Checks</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;Error Rate&lt;/strong&gt;"><strong>Error Rate</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;Listing Download&lt;/strong&gt;"><strong>Listing Download</strong></th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td headers="status_color" class="gt_row gt_center" style="background-color: #D61F1F;"></td>
<td headers="id" class="gt_row gt_left">3</td>
<td headers="label" class="gt_row gt_left">RAND: Randomization strata match recorded subject age</td>
<td headers="priority" class="gt_row gt_left">1</td>
<td headers="data_frames" class="gt_row gt_left">RAND, DM</td>
<td headers="columns" class="gt_row gt_left">RAND_STRATA, DM.AGE</td>
<td headers="error_n" class="gt_row gt_center">1</td>
<td headers="total_n" class="gt_row gt_center">4</td>
<td headers="error_rate" class="gt_row gt_center">25.0%</td>
<td headers="csv_download_link" class="gt_row gt_center"><div class="gt_from_md">
<a href="data:text/csv;base64,U1VCSkVDVCxSQU5EX1NUUkFUQSxETS5BR0UKNCw+PTY1eXIsNjAK" download="extract_1.csv">
  <button aria-label="Not sure what title text is for" data-balloon-pos="left" style="background-color:#02304D;color:#FFFFFF;border:none;padding:5px;font-weight:bold;cursor:pointer;border-radius:4px;">CSV</button>
</a>
</div></td>
</tr>
<tr>
<td headers="status_color" class="gt_row gt_center" style="background-color: #D61F1F;"></td>
<td headers="id" class="gt_row gt_left">2</td>
<td headers="label" class="gt_row gt_left">RAND: Randomization Group is not missing</td>
<td headers="priority" class="gt_row gt_left">1</td>
<td headers="data_frames" class="gt_row gt_left">RAND</td>
<td headers="columns" class="gt_row gt_left">RAND_GROUP</td>
<td headers="error_n" class="gt_row gt_center">1</td>
<td headers="total_n" class="gt_row gt_center">5</td>
<td headers="error_rate" class="gt_row gt_center">20.0%</td>
<td headers="csv_download_link" class="gt_row gt_center"><div class="gt_from_md">
<a href="data:text/csv;base64,U1VCSkVDVCxSQU5EX0dST1VQCjUsTkEK" download="extract_2.csv">
  <button aria-label="Not sure what title text is for" data-balloon-pos="left" style="background-color:#02304D;color:#FFFFFF;border:none;padding:5px;font-weight:bold;cursor:pointer;border-radius:4px;">CSV</button>
</a>
</div></td>
</tr>
<tr>
<td headers="status_color" class="gt_row gt_center" style="background-color: #FFD301;"></td>
<td headers="id" class="gt_row gt_left">4</td>
<td headers="label" class="gt_row gt_left">DM: Subject race is one of 'Asian', 'Black or African American', 'Native Hawaiian or Other Pacific Islander', 'American Indian or Alaska Native', 'White'</td>
<td headers="priority" class="gt_row gt_left">—</td>
<td headers="data_frames" class="gt_row gt_left">DM</td>
<td headers="columns" class="gt_row gt_left">RACE</td>
<td headers="error_n" class="gt_row gt_center">1</td>
<td headers="total_n" class="gt_row gt_center">4</td>
<td headers="error_rate" class="gt_row gt_center">25.0%</td>
<td headers="csv_download_link" class="gt_row gt_center"><div class="gt_from_md">
<a href="data:text/csv;base64,U1VCSkVDVCxSQUNFLC4uZmxhZy4uCjEsQXNpYW4sTkEKMixCbGFjayBvciBBZnJpY2FuIEFtZXJpY2FuLE5BCjMsTmF0aXZlIEFtZXJpY2FuLCJETTogU3ViamVjdCByYWNlIGlzIG9uZSBvZiAnQXNpYW4nLCAnQmxhY2sgb3IgQWZyaWNhbiBBbWVyaWNhbicsICdOYXRpdmUgSGF3YWlpYW4gb3IgT3RoZXIgUGFjaWZpYyBJc2xhbmRlcicsICdBbWVyaWNhbiBJbmRpYW4gb3IgQWxhc2thIE5hdGl2ZScsICdXaGl0ZSciCjQsTmF0aXZlIEhhd2FpaWFuIG9yIE90aGVyIFBhY2lmaWMgSXNsYW5kZXIsTkEK" download="extract_3.csv">
  <button aria-label="Not sure what title text is for" data-balloon-pos="left" style="background-color:#02304D;color:#FFFFFF;border:none;padding:5px;font-weight:bold;cursor:pointer;border-radius:4px;">CSV</button>
</a>
</div></td>
</tr>
<tr>
<td headers="status_color" class="gt_row gt_center" style="background-color: #006B3D;"></td>
<td headers="id" class="gt_row gt_left">1</td>
<td headers="label" class="gt_row gt_left">RAND: Subject ID is not missing</td>
<td headers="priority" class="gt_row gt_left">1</td>
<td headers="data_frames" class="gt_row gt_left">RAND</td>
<td headers="columns" class="gt_row gt_left">SUBJECT</td>
<td headers="error_n" class="gt_row gt_center">0</td>
<td headers="total_n" class="gt_row gt_center">5</td>
<td headers="error_rate" class="gt_row gt_center">0.0%</td>
<td headers="csv_download_link" class="gt_row gt_center"><div class="gt_from_md">
<p>—</p>
</div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section level2">
<h2 id="validate-derived-variables">Validate Derived Variables<a class="anchor" aria-label="anchor" href="#validate-derived-variables"></a>
</h2>
<p>Using EDC data to derive new variables requires a different style of
data validations. When validating raw EDC data, we must report
bad/inconsistent data to a data manager who will then investigate and
correct the data in the source data base. When validating derived
variables based on raw EDC data, we make assumptions about the data.
Validations can be used to ensure that whatever assumptions we made on
the day we first derived a new variable are still met as the raw EDC
data continues to be updated.</p>
<p>For example, imagine you are classifying tumor locations into a
broader tumor region variable. The first time you write the code, you
will classify every location into a broader region, but there is no way
to know what may be entered as a new tumor location in the future.
Therefore, we can write a validation that each location is mapped to a
region. If a location is not mapped, rather than reporting this to a
data management team, you may opt to return an error so you know that
the new location needs to be handled. Return errors by using the
<code>affirm_true(error=TRUE)</code> argument. The error message will
reference the affirmation label, making it clear why a script has
erred.</p>
<p>In this case, you may want to set the following option at the top of
a script that derives to analysis variables.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span><span class="st">"affirm.error"</span> <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Every newly derived variable should be associated with
<strong>multiple</strong> affirmations to ensure the derivation remains
correct into the future.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Daniel D. Sjoberg, Travis Gerke, Shannon Pileggi, PCCTC, LLC.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
